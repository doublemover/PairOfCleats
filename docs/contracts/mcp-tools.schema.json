{"schemaVersion":"1.2.0","tools":[{"description":"Bootstrap models/dictionaries and build indexes.","inputSchema":{"properties":{"incremental":{"type":"boolean"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"skipArtifacts":{"type":"boolean"},"skipDicts":{"type":"boolean"},"skipIndex":{"type":"boolean"},"skipInstall":{"type":"boolean"},"skipTooling":{"type":"boolean"},"withSqlite":{"type":"boolean"}},"type":"object"},"name":"bootstrap"},{"description":"Build or update indexes for a repo (optionally SQLite + incremental).","inputSchema":{"properties":{"artifactsDir":{"description":"Path to CI artifacts directory.","type":"string"},"incremental":{"description":"Reuse per-file incremental cache.","type":"boolean"},"mode":{"enum":["all","code","prose","extracted-prose","records"],"type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"sqlite":{"description":"Build SQLite indexes after JSON indexes.","type":"boolean"},"stubEmbeddings":{"description":"Skip model downloads and use stub embeddings.","type":"boolean"},"useArtifacts":{"description":"Restore CI artifacts before building.","type":"boolean"}},"type":"object"},"name":"build_index"},{"description":"Build SQLite indexes from JSON artifacts.","inputSchema":{"properties":{"codeDir":{"type":"string"},"compact":{"type":"boolean"},"incremental":{"type":"boolean"},"mode":{"enum":["all","code","prose"],"type":"string"},"out":{"type":"string"},"proseDir":{"type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"build_sqlite_index"},{"description":"Garbage-collect repo caches.","inputSchema":{"properties":{"dryRun":{"type":"boolean"},"maxAgeDays":{"type":"number"},"maxBytes":{"type":"number"},"maxGb":{"type":"number"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"cache_gc"},{"description":"Remove repo cache artifacts (optional all repos).","inputSchema":{"properties":{"all":{"type":"boolean"},"dryRun":{"type":"boolean"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"clean_artifacts"},{"description":"Compact SQLite indexes to prune unused rows.","inputSchema":{"properties":{"dryRun":{"type":"boolean"},"keepBackup":{"type":"boolean"},"mode":{"enum":["all","code","prose"],"type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"compact_sqlite_index"},{"description":"Inspect configuration and cache status, with warnings.","inputSchema":{"properties":{"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"config_status"},{"description":"Download dictionary wordlists into the shared cache.","inputSchema":{"properties":{"dir":{"description":"Override dictionary directory.","type":"string"},"force":{"description":"Force re-downloads.","type":"boolean"},"lang":{"description":"Comma-separated language codes (ex: en).","type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"update":{"description":"Check for updates (If-Modified-Since).","type":"boolean"},"url":{"description":"Extra source(s) name=url (repeatable).","type":"string"}},"type":"object"},"name":"download_dictionaries"},{"description":"Download SQLite ANN extensions into the cache.","inputSchema":{"properties":{"arch":{"description":"Override architecture.","type":"string"},"dir":{"description":"Override extension directory.","type":"string"},"force":{"description":"Force re-downloads.","type":"boolean"},"out":{"description":"Explicit output path.","type":"string"},"platform":{"description":"Override platform.","type":"string"},"provider":{"description":"Extension provider (ex: sqlite-vec).","type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"update":{"description":"Check for updates (If-Modified-Since).","type":"boolean"},"url":{"description":"Override download URL(s) name=url (repeatable).","type":"string"}},"type":"object"},"name":"download_extensions"},{"description":"Download embedding models into the shared cache.","inputSchema":{"properties":{"cacheDir":{"description":"Override cache directory.","type":"string"},"model":{"description":"Model id (default Xenova/all-MiniLM-L12-v2).","type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"download_models"},{"description":"Return cache and index status for a repo path.","inputSchema":{"properties":{"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"index_status"},{"description":"Report current artifact sizes for the repo and cache root.","inputSchema":{"properties":{"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"}},"type":"object"},"name":"report_artifacts"},{"description":"Run a search query against the repo index.","inputSchema":{"properties":{"alias":{"description":"Filter by alias dataflow.","type":"string"},"allowSparseFallback":{"description":"Allow ANN fallback when sparse-only is requested but sparse is unavailable.","type":"boolean"},"allowUnsafeMix":{"description":"Allow compatibility/profile cohort mixing when keys do not match.","type":"boolean"},"ann":{"description":"Enable ANN re-ranking (default uses config).","type":"boolean"},"async":{"description":"Filter async constructs.","type":"boolean"},"author":{"description":"Filter by last author (git).","type":"string"},"awaits":{"description":"Filter by await targets.","type":"string"},"backend":{"enum":["memory","sqlite","sqlite-fts"],"type":"string"},"branch":{"description":"Git branch filter (current branch).","type":"string"},"branchesMin":{"description":"Min branch count.","type":"number"},"breaksMin":{"description":"Min break count.","type":"number"},"calls":{"description":"Filter by call relationships.","type":"string"},"case":{"description":"Case-sensitive matching for file/path and tokens.","type":"boolean"},"caseFile":{"description":"Case-sensitive file/path matching.","type":"boolean"},"caseTokens":{"description":"Case-sensitive token matching.","type":"boolean"},"chunkAuthor":{"description":"Filter by chunk author (git blame).","type":"string"},"churnMin":{"description":"Minimum git churn (added+deleted lines).","type":"number"},"context":{"description":"Context lines.","type":"number"},"continuesMin":{"description":"Min continue count.","type":"number"},"decorator":{"description":"Filter by decorator/attribute.","type":"string"},"ext":{"description":"Extension filter (ex: .js).","type":"string"},"extends":{"description":"Filter by inheritance.","type":"string"},"file":{"description":"Substring/regex match for file paths.","type":"string"},"generator":{"description":"Filter generator constructs.","type":"boolean"},"import":{"description":"Filter by imported module.","type":"string"},"inferredType":{"description":"Filter by inferred type.","type":"string"},"lang":{"description":"Language filter (maps to extensions).","type":"string"},"lint":{"description":"Filter chunks with lint results.","type":"boolean"},"loopsMin":{"description":"Min loop count.","type":"number"},"meta":{"description":"Metadata filters for records (key/value).","type":"object"},"metaJson":{"description":"JSON metadata filters for records.","type":"string"},"mode":{"enum":["both","code","prose","extracted-prose","records","all"],"type":"string"},"modifiedAfter":{"description":"Filter by last modified date (parseable string).","type":"string"},"modifiedSince":{"description":"Filter by last modified recency (days).","type":"number"},"mutates":{"description":"Filter by mutation dataflow.","type":"string"},"output":{"description":"Return compact JSON (default) or full payload.","enum":["compact","full"],"type":"string"},"param":{"description":"Filter by parameter name.","type":"string"},"path":{"description":"Substring/regex match for file paths.","type":"string"},"query":{"type":"string"},"reads":{"description":"Filter by read dataflow.","type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"returnType":{"description":"Filter by return type.","type":"string"},"returns":{"description":"Filter chunks with returns.","type":"boolean"},"risk":{"description":"Filter by risk tag.","type":"string"},"riskCategory":{"description":"Filter by risk category.","type":"string"},"riskFlow":{"description":"Filter by risk flow.","type":"string"},"riskSink":{"description":"Filter by risk sink.","type":"string"},"riskSource":{"description":"Filter by risk source.","type":"string"},"riskTag":{"description":"Filter by risk tag.","type":"string"},"signature":{"description":"Filter by signature text.","type":"string"},"throws":{"description":"Filter by throws/raises.","type":"string"},"top":{"description":"Top N results.","type":"number"},"type":{"description":"Filter by chunk kind/type.","type":"string"},"uses":{"description":"Filter by identifier usage.","type":"string"},"visibility":{"description":"Filter by visibility.","type":"string"},"writes":{"description":"Filter by write dataflow.","type":"string"}},"required":["query"],"type":"object"},"name":"search"},{"description":"Run federated search across repos from a workspace configuration.","inputSchema":{"properties":{"allowUnsafeMix":{"type":"boolean"},"cohort":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}]},"cohorts":{"properties":{"allowUnsafeMix":{"type":"boolean"},"cohort":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}]},"policy":{"enum":["default","strict"],"type":"string"}},"type":"object"},"debug":{"properties":{"includePaths":{"type":"boolean"}},"type":"object"},"limits":{"properties":{"concurrency":{"type":"number"},"perRepoTop":{"type":"number"}},"type":"object"},"merge":{"properties":{"rrfK":{"type":"number"},"strategy":{"enum":["rrf"],"type":"string"}},"type":"object"},"query":{"type":"string"},"search":{"description":"Single-repo search knobs forwarded per repo (mode/top/backend/filter/etc).","type":"object"},"select":{"properties":{"includeDisabled":{"type":"boolean"},"repoFilter":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}]},"repos":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}]},"tags":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}]}},"type":"object"},"strict":{"type":"boolean"},"workspaceId":{"description":"Expected workspace repoSetId (optional cross-check).","type":"string"},"workspacePath":{"description":"Workspace config path (.jsonc).","type":"string"}},"required":["workspacePath","query"],"type":"object"},"name":"search_workspace"},{"description":"Generate a triage context pack for a finding.","inputSchema":{"properties":{"ann":{"description":"Enable ANN search for evidence.","type":"boolean"},"outPath":{"description":"Output file path.","type":"string"},"recordId":{"description":"Finding record id.","type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"stubEmbeddings":{"description":"Use stub embeddings for evidence search.","type":"boolean"}},"required":["recordId"],"type":"object"},"name":"triage_context_pack"},{"description":"Create a triage decision record linked to a finding.","inputSchema":{"properties":{"codes":{"description":"Justification codes.","items":{"type":"string"},"type":"array"},"evidence":{"description":"Evidence references.","items":{"type":"string"},"type":"array"},"expires":{"description":"ISO date for expiry.","type":"string"},"finding":{"description":"Finding record id.","type":"string"},"justification":{"type":"string"},"meta":{"description":"Additional routing metadata.","type":"object"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"reviewer":{"type":"string"},"status":{"enum":["fix","accept","defer","false_positive","not_affected"],"type":"string"}},"required":["finding","status"],"type":"object"},"name":"triage_decision"},{"description":"Ingest vulnerability findings into triage records.","inputSchema":{"properties":{"buildIndex":{"description":"Build the records index after ingest.","type":"boolean"},"incremental":{"description":"Use incremental indexing if enabled.","type":"boolean"},"inputPath":{"description":"Input JSON/JSONL file.","type":"string"},"meta":{"description":"Routing metadata (service/env/team/owner/etc).","type":"object"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"source":{"enum":["dependabot","aws_inspector","generic","manual"],"type":"string"},"stubEmbeddings":{"description":"Use stub embeddings for indexing.","type":"boolean"}},"required":["source","inputPath"],"type":"object"},"name":"triage_ingest"},{"description":"Verify SQLite ANN extension availability.","inputSchema":{"properties":{"annMode":{"type":"string"},"arch":{"type":"string"},"column":{"type":"string"},"dir":{"type":"string"},"encoding":{"type":"string"},"load":{"description":"Attempt to load extension (default true).","type":"boolean"},"module":{"type":"string"},"options":{"type":"string"},"path":{"type":"string"},"platform":{"type":"string"},"provider":{"type":"string"},"repoPath":{"description":"Repo path (defaults to server cwd).","type":"string"},"table":{"type":"string"}},"type":"object"},"name":"verify_extensions"}]}
