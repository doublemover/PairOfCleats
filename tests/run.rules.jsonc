{
  "excludedDirs": [
    "fixtures",
    "script-coverage",
    "helpers",
    ".testLogs",
    ".testCache",
    ".logs",
    ".cache",
    ".worktrees",
    "worktree",
    "worktrees"
  ],
  "excludedFiles": ["run.js", "all.js", "script-coverage.js", "api-server-stream.js"],
  "knownLanes": ["smoke", "unit", "ci-lite", "ci-long", "integration", "services", "api", "storage", "perf", "ci"],
  "laneRules": [
    { "lane": "perf", "match": ["^perf/", "^bench", "-perf-", "^kotlin-perf-guard"] },
    { "lane": "ci-lite", "match": ["^ci-lite/"] },
    { "lane": "smoke", "match": ["^smoke(?:-|$)", "^harness/smoke/"] },
    { "lane": "api", "match": ["^services/api/"] },
    { "lane": "services", "match": ["^services/", "^api-server", "^mcp", "^indexer-service", "^service-queue"] },
    { "lane": "storage", "match": ["^storage/", "^sqlite", "^lmdb", "^vector-extension"] },
    {
      "lane": "unit",
      "match": [
        "^crossfile/",
        "^unit/",
        "^identity/",
        "^embeddings/",
        "^embedding-",
        "\\.unit(\\.|$)",
        "^harness/",
        "^jsonrpc-",
        "^json-stream",
        "^tokenize-",
        "^tokenization-",
        "^dict-",
        "^cache-lru",
        "^build-runtime/",
        "^test-runner$"
      ]
    }
  ],
  "tagRules": [
    { "tag": "perf", "match": ["^perf/"] },
    { "tag": "services", "match": ["^services/"] },
    { "tag": "api", "match": ["^services/api/"] },
    { "tag": "storage", "match": ["^storage/"] },
    { "tag": "indexing", "match": ["^indexing/"] },
    { "tag": "retrieval", "match": ["^retrieval/", "^retrieval-"] },
    { "tag": "lang", "match": ["^lang/"] },
    { "tag": "tooling", "match": ["^tooling/"] },
    { "tag": "harness", "match": ["^harness/"] },
    { "tag": "bench", "match": ["^bench"] },
    { "tag": "smoke", "match": ["^smoke"] },
    { "tag": "sqlite", "match": ["sqlite"] },
    { "tag": "lmdb", "match": ["lmdb"] },
    { "tag": "mcp", "match": ["mcp"] },
    { "tag": "api", "match": ["^api-server"] },
    { "tag": "watch", "match": ["^watch-"] },
    { "tag": "embeddings", "match": ["embeddings"] },
    { "tag": "tooling", "match": ["tooling|lsp|type-inference"] },
    {
      "tag": "long",
      "match": [
        "^lang/fixtures-sample/python-metadata\\.test$",
        "^lang/fixtures-sample/rust-metadata\\.test$",
        "^lang/fixtures-sample/swift-metadata\\.test$",
        "^retrieval/contracts/compact-json\\.test$",
        "^retrieval/contracts/result-shape\\.test$",
        "^retrieval/filters/ext-path\\.test$",
        "^retrieval/filters/type-signature-decorator\\.test$",
        "^lang/contracts/python\\.test$",
        "^parity$",
        "^fixture-parity$",
        "^fixture-eval$",
        "^incremental-tokenization-cache$",
        "^index-config-dump$",
        "^summary-report-parity-sqlite$",
        "^config-dump$",
        "^summary-report-parity-sqlite-fts$",
        "^code-map-performance$",
        "^summary-report-compare-memory$",
        "^summary-report-compare-sqlite$",
        "^search-help$",
        "^integration/ann-parity\\.test$",
        "^incremental-cache-signature$",
        "^retrieval/filters/behavioral\\.test$",
        "^retrieval/filters/risk\\.test$",
        "^retrieval/filters/types\\.test$",
        "^retrieval-strict-manifest-embeddings$",
        "^lang/contracts/misc-buildfiles\\.test$",
        "^retrieval/filters/control-flow\\.test$",
        "^retrieval/filters/file-selector\\.test$",
        "^lang/contracts/go\\.test$",
        "^lang/contracts/sql\\.test$",
        "^lang/contracts/javascript\\.test$",
        "^lang/contracts/typescript\\.test$",
        "^summary-report$",
        "^hnsw-ann$",
        "^indexing/language-fixture/postings-integrity\\.test$",
        "^indexing/language-fixture/chunk-meta-exists\\.test$",
        "^code-map-guardrails$",
        "^comment-join$",
        "^integration/chunkuid-determinism\\.test$",
        "^eval-quality$",
        "^fielded-bm25$",
        "^artifact-size-guardrails$",
        "^churn-filter$",
        "^manifest-embeddings-pieces$",
        "^hnsw-atomic$",
        "^embeddings-cache-identity$",
        "^tooling/triage/records-index-and-search\\.test$",
        "^embeddings-dims-mismatch$",
        "^embeddings-validate$",
        "^repo-root$",
        "^retrieval/filters/file-and-token/file-selector-case\\.test$",
        "^integration/symbol-artifact-determinism\\.test$",
        "^extracted-prose$",
        "^search-tie-order$",
        "^prose-skip-imports$",
        "^subprocess-quoting$"
      ]
    },
    {
      "match": [
        "^lancedb-ann$",
        "^piece-assembly$",
        "^query-cache$",
        "^search-rrf$",
        "^shard-merge$"
      ]
    },
    {
      "tag": "long",
      "match": [
        "^tooling/triage/context-pack\\.test$",
        "^services/mcp/tool-search-defaults-and-filters\\.test$"
      ]
    },
    {
      "tag": "DelayedUntilPhase7_8",
      "match": ["^lmdb-"]
    },
    { "tag": "destructive", "match": ["^uninstall"] }
  ],
  "outputIgnorePatterns": ["^\\[ignore\\]\\s+read-failed\\b"]
}
