# Test Errors

- 2026-01-18 07:29:39 | `tests\two-stage-state.js` | 3.41s | exit 1 | reason: Files:                   index-code.db | index-prose.db | index-extracted-prose.db | index-records.db | SQLite Counts: code=1 prose=0 extracted-prose=0 records=0 | [error] Index build failed: Index validation failed; see index-validate output for details. | [error] Crash log: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\two-stage-state\cache\repos\repo-a0a3774ad966\logs\index-crash.log | Failed: stage1
- 2026-01-18 07:30:01 | `tests\uninstall.js` | 0.32s | exit 1 | reason: cache root still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\cache | dict dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\dicts | models dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\models | extensions dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\extensions
- 2026-01-18 07:30:03 | `tests\unsupported-language-skip.js` | 1.63s | exit 1 | reason: Expected null result for unsupported language.
- 2026-01-18 07:30:03 | `tests\vector-extension-missing.js` | 0.15s | exit 1 | reason: ^ |  | Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0
- 2026-01-18 07:30:05 | `tests\watch-backend-selection.js` | 1.83s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: 'parcel', |   expected: 'chokidar', |   operator: 'strictEqual' | } |  | Node.js v24.0.0
- 2026-01-18 07:30:08 | `tests\watch-filter.js` | 1.66s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: 'strictEqual' | } |  | Node.js v24.0.0
- 2026-01-18 07:31:58 | `tests\cache-gc.js` | 0.19s | exit 1 | reason: file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47 | if (!agePayload.removals.some((entry) => entry.id === 'old-repo')) { |                          ^ |  | TypeError: Cannot read properties of undefined (reading 'some') |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47:26 |  | Node.js v24.0.0
- 2026-01-18 07:32:19 | `tests\embeddings-sqlite-dense.js` | 0.16s | exit 1 | reason: SqliteError: table dense_meta has no column named min_val |     at Database.prepare (C:\Users\sneak\Development\PairOfCleats_CODEX\node_modules\better-sqlite3\lib\methods\wrappers.js:5:21) |     at updateSqliteDense (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/build-embeddings/sqlite-dense.js:112:27) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/embeddings-sqlite-dense.js:64:23 { |   code: 'SQLITE_ERROR' | } |  | Node.js v24.0.0
- 2026-01-18 07:33:12 | `tests\parity.js` | 0.12s | exit 1 | reason: Missing C:\Users\sneak\AppData\Local\PairOfCleats\repos\adriana30414244-f63ec7d2f734\index-code\chunk_meta.json. Build the index first.
- 2026-01-18 07:33:24 | `tests\retrieval-auto-sqlite-thresholds.js` | 0.06s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: '==' | } |  | Node.js v24.0.0
- 2026-01-18 07:35:11 | `tests\uninstall.js` | 0.54s | exit 1 | reason: cache root still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\cache | dict dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\dicts | models dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\models | extensions dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\extensions
- 2026-01-18 07:35:13 | `tests\vector-extension-missing.js` | 0.43s | exit 1 | reason: ^ |  | Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0
- 2026-01-18 07:43:30 | `tests\cache-gc.js` | 0.22s | exit 1 | reason: file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47 | if (!agePayload.removals.some((entry) => entry.id === 'old-repo')) { |                          ^ |  | TypeError: Cannot read properties of undefined (reading 'some') |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47:26 |  | Node.js v24.0.0
- 2026-01-18 07:48:17 | `tests\cache-gc.js` | 0.19s | exit 1 | reason: file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47 | if (!agePayload.removals.some((entry) => entry.id === 'old-repo')) { |                          ^ |  | TypeError: Cannot read properties of undefined (reading 'some') |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47:26 |  | Node.js v24.0.0
- 2026-01-18 07:48:38 | `tests\embeddings-sqlite-dense.js` | 0.15s | exit 1 | reason: SqliteError: table dense_meta has no column named min_val |     at Database.prepare (C:\Users\sneak\Development\PairOfCleats_CODEX\node_modules\better-sqlite3\lib\methods\wrappers.js:5:21) |     at updateSqliteDense (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/build-embeddings/sqlite-dense.js:112:27) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/embeddings-sqlite-dense.js:64:23 { |   code: 'SQLITE_ERROR' | } |  | Node.js v24.0.0
- 2026-01-18 07:49:30 | `tests\parity.js` | 0.12s | exit 1 | reason: Missing C:\Users\sneak\AppData\Local\PairOfCleats\repos\adriana30414244-f63ec7d2f734\index-code\chunk_meta.json. Build the index first.
- 2026-01-18 07:49:41 | `tests\retrieval-auto-sqlite-thresholds.js` | 0.07s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: '==' | } |  | Node.js v24.0.0
- 2026-01-18 07:51:15 | `tests\uninstall.js` | 0.22s | exit 1 | reason: cache root still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\cache | dict dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\dicts | models dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\models | extensions dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\extensions
- 2026-01-18 07:51:16 | `tests\vector-extension-missing.js` | 0.17s | exit 1 | reason: ^ |  | Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0
- 2026-01-18 08:01:52 | `tests\all.js` | 2.61s | exit 1 | reason: Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0 | Failed: vector-extension-missing-test (attempt 3/3). Log: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.logs\2026-01-18T13-01-49-920Z\vector-extension-missing-test.attempt-3.log | Failed: script-coverage-test
- 2026-01-18 08:01:54 | `tests\artifact-size-guardrails.js` | 2.52s | exit 1 | reason: Files:                   index-code.db | SQLite Counts: code=0 | [DONE] Index built for 0 files in 1 seconds (0 lines). |                                 Code: 0 files   (0 lines). |                                Prose: 0 files   (0 lines). |                      Extracted Prose: 0 files   (0 lines). |                              Records: 0 records (0 lines). | Expected chunk_meta sharding when max JSON bytes is small.
- 2026-01-18 08:02:05 | `tests\cache-gc.js` | 0.19s | exit 1 | reason: file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47 | if (!agePayload.removals.some((entry) => entry.id === 'old-repo')) { |                          ^ |  | TypeError: Cannot read properties of undefined (reading 'some') |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/cache-gc.js:47:26 |  | Node.js v24.0.0
- 2026-01-18 08:02:48 | `tests\compact-pieces.js` | 2.75s | exit 1 | reason: → Indexed 2 chunks, total tokens: 10 | Embeddings disabled; skipping dense vector build. | code Stage 6/6 (done) write | → Wrote .filelists.json (samples only). | Chunk metadata estimate ~4.3KB; using jsonl-sharded to stay under 2.0KB. | [error] Index build failed: chunk_meta entry exceeds max JSON size (2187 bytes). | [error] Crash log: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\compact-pieces\cache\repos\repo-3f262b363565\logs\index-crash.log | Failed: build_index
- 2026-01-18 08:03:06 | `tests\embeddings-sqlite-dense.js` | 0.15s | exit 1 | reason: SqliteError: table dense_meta has no column named min_val |     at Database.prepare (C:\Users\sneak\Development\PairOfCleats_CODEX\node_modules\better-sqlite3\lib\methods\wrappers.js:5:21) |     at updateSqliteDense (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/build-embeddings/sqlite-dense.js:112:27) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/embeddings-sqlite-dense.js:64:23 { |   code: 'SQLITE_ERROR' | } |  | Node.js v24.0.0
- 2026-01-18 08:04:48 | `tests\index-metrics-options.js` | 2.02s | exit 1 | reason: Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\index-metrics-options\repo\.pairofcleats.json: | - #/indexing is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at getRepoCacheRoot (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:302:29) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/build_index.js:62:23 |  | Node.js v24.0.0 | Failed: build index for metrics options test
- 2026-01-18 08:04:53 | `tests\indexing\fixtures\build-and-artifacts.test.js` | 0.4s | exit 1 | reason: [error] prose index missing; build index-prose first. | Failed: build sqlite index
- 2026-01-18 08:04:53 | `tests\indexing\fixtures\minhash-consistency.test.js` | 0.1s | exit 1 | reason: at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/indexing/fixtures/minhash-consistency.test.js:36:1 { |   errno: -4058, |   code: 'ENOENT', |   syscall: 'open', |   path: 'C:\\Users\\sneak\\AppData\\Local\\PairOfCleats\\repos\\sample-684b13857130\\builds\\20260118T130250Z_b17b11b_cc36ecc3\\index-prose\\chunk_meta.json' | } |  | Node.js v24.0.0
- 2026-01-18 08:06:23 | `tests\mcp-schema.js` | 4.98s | exit 1 | reason: MCP schema snapshot mismatch.
- 2026-01-18 08:06:23 | `tests\parity.js` | 0.12s | exit 1 | reason: Missing C:\Users\sneak\AppData\Local\PairOfCleats\repos\adriana30414244-f63ec7d2f734\index-code\chunk_meta.json. Build the index first.
- 2026-01-18 08:06:43 | `tests\prose-rust-exclusion.js` | 4.58s | exit 1 | reason: [embeddings] prose/code: wrote LanceDB table (1 vectors). | [warn] [embeddings] SQLite prose index missing; skipping. | [embeddings] prose: wrote 1 vectors (dims=384). | [embeddings] extracted-prose: wrote 0 vectors (dims=384). | Embeddings 2/2 (done) extracted-prose | [error] code index missing; build index-code first. | [error] Index build failed: code index missing; build index-code first. | [error] Crash log: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\prose-rust-exclusion\cache\repos\repo-ab55928393d5\logs\index-crash.log
- 2026-01-18 08:07:05 | `tests\retrieval-auto-sqlite-thresholds.js` | 0.06s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: '==' | } |  | Node.js v24.0.0
- 2026-01-18 08:07:07 | `tests\retrieval\contracts\compact-json.test.js` | 2.04s | exit 1 | reason: Fixture compact JSON failed: search error.
- 2026-01-18 08:07:58 | `tests\retrieval\filters\query-syntax\phrases-and-scorebreakdown.test.js` | 2.15s | exit 1 | reason: Expected phrase match score breakdown for quoted phrase.
- 2026-01-18 08:08:21 | `tests\script-coverage.js` | 2.57s | exit 1 | reason: | Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0 | Failed: vector-extension-missing-test (attempt 3/3). Log: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.logs\2026-01-18T13-08-19-264Z\vector-extension-missing-test.attempt-3.log
- 2026-01-18 08:08:44 | `tests\search-help.js` | 2.24s | exit 1 | reason: Help output missing flag: --calls
- 2026-01-18 08:09:19 | `tests\services\api\health-and-status.test.js` | 3.76s | exit 1 | reason: api-server should reject missing auth
- 2026-01-18 08:09:21 | `tests\services\api\no-index.test.js` | 1.99s | exit 1 | reason: api-server should return NO_INDEX when indexes are missing
- 2026-01-18 08:09:28 | `tests\services\api\search-happy-path.test.js` | 3.68s | exit 1 | reason: api-server /search returned no results
- 2026-01-18 08:09:32 | `tests\services\api\search-validation.test.js` | 4.27s | exit 1 | reason: socket hang up
- 2026-01-18 08:09:50 | `tests\services\mcp\tool-search-defaults-and-filters.test.js` | 2.16s | exit 1 | reason: MCP search should default to compact JSON payloads
- 2026-01-18 08:10:00 | `tests\shard-progress-determinism.js` | 3.39s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: '==' | } |  | Node.js v24.0.0
- 2026-01-18 08:10:24 | `tests\smoke-services.js` | 3.93s | exit 1 | reason: api-server should reject missing auth | Failed: api-health-status
- 2026-01-18 08:12:42 | `tests\uninstall.js` | 0.45s | exit 1 | reason: cache root still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\cache | dict dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\dicts | models dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\models | extensions dir still exists: C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\uninstall\extensions
- 2026-01-18 08:12:44 | `tests\unsupported-language-skip.js` | 1.78s | exit 1 | reason: Expected null result for unsupported language.
- 2026-01-18 08:12:44 | `tests\vector-extension-missing.js` | 0.16s | exit 1 | reason: ^ |  | Error: Config errors in C:\Users\sneak\Development\PairOfCleats_CODEX\worktrees\adriana30414244\tests\.cache\vector-extension-missing\repo\.pairofcleats.json: | - #/sqlite is not allowed |     at loadUserConfig (file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tools/dict-utils.js:66:11) |     at file:///C:/Users/sneak/Development/PairOfCleats_CODEX/worktrees/adriana30414244/tests/vector-extension-missing.js:35:20 |  | Node.js v24.0.0
- 2026-01-18 08:12:46 | `tests\watch-backend-selection.js` | 1.92s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: 'parcel', |   expected: 'chokidar', |   operator: 'strictEqual' | } |  | Node.js v24.0.0
- 2026-01-18 08:12:50 | `tests\watch-filter.js` | 1.7s | exit 1 | reason: generatedMessage: false, |   code: 'ERR_ASSERTION', |   actual: false, |   expected: true, |   operator: 'strictEqual' | } |  | Node.js v24.0.0
